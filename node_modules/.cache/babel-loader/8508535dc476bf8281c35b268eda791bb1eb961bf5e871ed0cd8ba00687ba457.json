{"ast":null,"code":"import React,{useState}from'react';import{Card}from'primereact/card';import{InputText}from'primereact/inputtext';import{Password}from'primereact/password';import{Dropdown}from'primereact/dropdown';import{Button}from'primereact/button';import{Message}from'primereact/message';import{userAPI}from'../services/api';import'./CreateUser.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CreateUser=()=>{const[name,setName]=useState('');const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[role,setRole]=useState('user');const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[success,setSuccess]=useState('');const[emailError,setEmailError]=useState('');const roleOptions=[{label:'Korisnik',value:'user'},{label:'Administrator',value:'admin'}];const validateEmail=value=>{// RFC5322-ish simple validation\nconst pattern=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/;return pattern.test(value);};const handleSubmit=async e=>{e.preventDefault();setError('');setSuccess('');setEmailError('');if(!validateEmail(email)){setEmailError('Unesite validnu email adresu.');return;}setLoading(true);try{await userAPI.createUser(name,email,password,role);setSuccess('Korisnik je uspešno kreiran. Poslat je email za verifikaciju.');setName('');setEmail('');setPassword('');setRole('user');}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Greška pri kreiranju korisnika');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"create-user\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cu-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cu-header-icon\",children:/*#__PURE__*/_jsx(\"i\",{className:\"pi pi-user-plus\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cu-header-text\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Kreiraj korisnika\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Dodaj novog korisnika ili administratora u sistem\"})]})]}),/*#__PURE__*/_jsx(Card,{className:\"cu-card\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"cu-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cu-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cu-col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",className:\"cu-label\",children:\"Ime i prezime\"}),/*#__PURE__*/_jsx(InputText,{id:\"name\",value:name,onChange:e=>setName(e.target.value),className:\"cu-input\",placeholder:\"npr. Petar Petrovi\\u0107\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cu-col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"cu-label\",children:\"Email\"}),/*#__PURE__*/_jsx(InputText,{id:\"email\",type:\"email\",value:email,onChange:e=>{setEmail(e.target.value);if(emailError)setEmailError('');},className:\"cu-input \".concat(emailError?'cu-input-error':''),placeholder:\"npr. petar@example.com\",required:true}),emailError&&/*#__PURE__*/_jsx(\"small\",{className:\"cu-error-text\",children:emailError})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cu-col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"cu-label\",children:\"Lozinka\"}),/*#__PURE__*/_jsx(Password,{id:\"password\",value:password,onChange:e=>setPassword(e.target.value),className:\"cu-input\",feedback:false,toggleMask:true,placeholder:\"Unesi lozinku\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cu-col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"role\",className:\"cu-label\",children:\"Uloga\"}),/*#__PURE__*/_jsx(Dropdown,{id:\"role\",value:role,options:roleOptions,onChange:e=>setRole(e.value),className:\"cu-input\",placeholder:\"Izaberi ulogu\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cu-messages\",children:[error&&/*#__PURE__*/_jsx(Message,{severity:\"error\",text:error,className:\"cu-message\"}),success&&/*#__PURE__*/_jsx(Message,{severity:\"success\",text:success,className:\"cu-message\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"cu-actions\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",label:\"Kreiraj korisnika\",icon:\"pi pi-check\",className:\"cu-submit\",loading:loading})})]})})]});};export default CreateUser;","map":{"version":3,"names":["React","useState","Card","InputText","Password","Dropdown","Button","Message","userAPI","jsx","_jsx","jsxs","_jsxs","CreateUser","name","setName","email","setEmail","password","setPassword","role","setRole","loading","setLoading","error","setError","success","setSuccess","emailError","setEmailError","roleOptions","label","value","validateEmail","pattern","test","handleSubmit","e","preventDefault","createUser","err","_err$response","_err$response$data","response","data","message","className","children","onSubmit","htmlFor","id","onChange","target","placeholder","required","type","concat","feedback","toggleMask","options","severity","text","icon"],"sources":["/home/nikjeremic/Desktop/paymentService/uptiomio/src/components/CreateUser.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Card } from 'primereact/card';\nimport { InputText } from 'primereact/inputtext';\nimport { Password } from 'primereact/password';\nimport { Dropdown } from 'primereact/dropdown';\nimport { Button } from 'primereact/button';\nimport { Message } from 'primereact/message';\nimport { userAPI } from '../services/api';\nimport './CreateUser.css';\n\nconst CreateUser: React.FC = () => {\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [role, setRole] = useState<'user' | 'admin'>('user');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [emailError, setEmailError] = useState('');\n\n  const roleOptions = [\n    { label: 'Korisnik', value: 'user' },\n    { label: 'Administrator', value: 'admin' },\n  ];\n\n  const validateEmail = (value: string) => {\n    // RFC5322-ish simple validation\n    const pattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/;\n    return pattern.test(value);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setSuccess('');\n    setEmailError('');\n\n    if (!validateEmail(email)) {\n      setEmailError('Unesite validnu email adresu.');\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      await userAPI.createUser(name, email, password, role);\n      setSuccess('Korisnik je uspešno kreiran. Poslat je email za verifikaciju.');\n      setName('');\n      setEmail('');\n      setPassword('');\n      setRole('user');\n    } catch (err: any) {\n      setError(err.response?.data?.message || 'Greška pri kreiranju korisnika');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"create-user\">\n      <div className=\"cu-header\">\n        <div className=\"cu-header-icon\">\n          <i className=\"pi pi-user-plus\"></i>\n        </div>\n        <div className=\"cu-header-text\">\n          <h2>Kreiraj korisnika</h2>\n          <p>Dodaj novog korisnika ili administratora u sistem</p>\n        </div>\n      </div>\n\n      <Card className=\"cu-card\">\n        <form onSubmit={handleSubmit} className=\"cu-form\">\n          <div className=\"cu-grid\">\n            <div className=\"cu-col\">\n              <label htmlFor=\"name\" className=\"cu-label\">Ime i prezime</label>\n              <InputText id=\"name\" value={name} onChange={(e) => setName(e.target.value)} className=\"cu-input\" placeholder=\"npr. Petar Petrović\" required />\n            </div>\n\n            <div className=\"cu-col\">\n              <label htmlFor=\"email\" className=\"cu-label\">Email</label>\n              <InputText \n                id=\"email\" \n                type=\"email\" \n                value={email} \n                onChange={(e) => {\n                  setEmail(e.target.value);\n                  if (emailError) setEmailError('');\n                }} \n                className={`cu-input ${emailError ? 'cu-input-error' : ''}`} \n                placeholder=\"npr. petar@example.com\" \n                required \n              />\n              {emailError && <small className=\"cu-error-text\">{emailError}</small>}\n            </div>\n\n            <div className=\"cu-col\">\n              <label htmlFor=\"password\" className=\"cu-label\">Lozinka</label>\n              <Password id=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} className=\"cu-input\" feedback={false} toggleMask placeholder=\"Unesi lozinku\" required />\n            </div>\n\n            <div className=\"cu-col\">\n              <label htmlFor=\"role\" className=\"cu-label\">Uloga</label>\n              <Dropdown id=\"role\" value={role} options={roleOptions} onChange={(e) => setRole(e.value)} className=\"cu-input\" placeholder=\"Izaberi ulogu\" />\n            </div>\n          </div>\n\n          <div className=\"cu-messages\">\n            {error && <Message severity=\"error\" text={error} className=\"cu-message\" />}\n            {success && <Message severity=\"success\" text={success} className=\"cu-message\" />}\n          </div>\n\n          <div className=\"cu-actions\">\n            <Button type=\"submit\" label=\"Kreiraj korisnika\" icon=\"pi pi-check\" className=\"cu-submit\" loading={loading} />\n          </div>\n        </form>\n      </Card>\n    </div>\n  );\n};\n\nexport default CreateUser; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,IAAI,KAAQ,iBAAiB,CACtC,OAASC,SAAS,KAAQ,sBAAsB,CAChD,OAASC,QAAQ,KAAQ,qBAAqB,CAC9C,OAASC,QAAQ,KAAQ,qBAAqB,CAC9C,OAASC,MAAM,KAAQ,mBAAmB,CAC1C,OAASC,OAAO,KAAQ,oBAAoB,CAC5C,OAASC,OAAO,KAAQ,iBAAiB,CACzC,MAAO,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,UAAoB,CAAGA,CAAA,GAAM,CACjC,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACe,KAAK,CAAEC,QAAQ,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACiB,QAAQ,CAAEC,WAAW,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACmB,IAAI,CAAEC,OAAO,CAAC,CAAGpB,QAAQ,CAAmB,MAAM,CAAC,CAC1D,KAAM,CAACqB,OAAO,CAAEC,UAAU,CAAC,CAAGtB,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACuB,KAAK,CAAEC,QAAQ,CAAC,CAAGxB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACyB,OAAO,CAAEC,UAAU,CAAC,CAAG1B,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAAC2B,UAAU,CAAEC,aAAa,CAAC,CAAG5B,QAAQ,CAAC,EAAE,CAAC,CAEhD,KAAM,CAAA6B,WAAW,CAAG,CAClB,CAAEC,KAAK,CAAE,UAAU,CAAEC,KAAK,CAAE,MAAO,CAAC,CACpC,CAAED,KAAK,CAAE,eAAe,CAAEC,KAAK,CAAE,OAAQ,CAAC,CAC3C,CAED,KAAM,CAAAC,aAAa,CAAID,KAAa,EAAK,CACvC;AACA,KAAM,CAAAE,OAAO,CAAG,+BAA+B,CAC/C,MAAO,CAAAA,OAAO,CAACC,IAAI,CAACH,KAAK,CAAC,CAC5B,CAAC,CAED,KAAM,CAAAI,YAAY,CAAG,KAAO,CAAAC,CAAkB,EAAK,CACjDA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBb,QAAQ,CAAC,EAAE,CAAC,CACZE,UAAU,CAAC,EAAE,CAAC,CACdE,aAAa,CAAC,EAAE,CAAC,CAEjB,GAAI,CAACI,aAAa,CAACjB,KAAK,CAAC,CAAE,CACzBa,aAAa,CAAC,+BAA+B,CAAC,CAC9C,OACF,CAEAN,UAAU,CAAC,IAAI,CAAC,CAEhB,GAAI,CACF,KAAM,CAAAf,OAAO,CAAC+B,UAAU,CAACzB,IAAI,CAAEE,KAAK,CAAEE,QAAQ,CAAEE,IAAI,CAAC,CACrDO,UAAU,CAAC,+DAA+D,CAAC,CAC3EZ,OAAO,CAAC,EAAE,CAAC,CACXE,QAAQ,CAAC,EAAE,CAAC,CACZE,WAAW,CAAC,EAAE,CAAC,CACfE,OAAO,CAAC,MAAM,CAAC,CACjB,CAAE,MAAOmB,GAAQ,CAAE,KAAAC,aAAA,CAAAC,kBAAA,CACjBjB,QAAQ,CAAC,EAAAgB,aAAA,CAAAD,GAAG,CAACG,QAAQ,UAAAF,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcG,IAAI,UAAAF,kBAAA,iBAAlBA,kBAAA,CAAoBG,OAAO,GAAI,gCAAgC,CAAC,CAC3E,CAAC,OAAS,CACRtB,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,mBACEX,KAAA,QAAKkC,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BnC,KAAA,QAAKkC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBrC,IAAA,QAAKoC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,cAC7BrC,IAAA,MAAGoC,SAAS,CAAC,iBAAiB,CAAI,CAAC,CAChC,CAAC,cACNlC,KAAA,QAAKkC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BrC,IAAA,OAAAqC,QAAA,CAAI,mBAAiB,CAAI,CAAC,cAC1BrC,IAAA,MAAAqC,QAAA,CAAG,mDAAiD,CAAG,CAAC,EACrD,CAAC,EACH,CAAC,cAENrC,IAAA,CAACR,IAAI,EAAC4C,SAAS,CAAC,SAAS,CAAAC,QAAA,cACvBnC,KAAA,SAAMoC,QAAQ,CAAEZ,YAAa,CAACU,SAAS,CAAC,SAAS,CAAAC,QAAA,eAC/CnC,KAAA,QAAKkC,SAAS,CAAC,SAAS,CAAAC,QAAA,eACtBnC,KAAA,QAAKkC,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACrBrC,IAAA,UAAOuC,OAAO,CAAC,MAAM,CAACH,SAAS,CAAC,UAAU,CAAAC,QAAA,CAAC,eAAa,CAAO,CAAC,cAChErC,IAAA,CAACP,SAAS,EAAC+C,EAAE,CAAC,MAAM,CAAClB,KAAK,CAAElB,IAAK,CAACqC,QAAQ,CAAGd,CAAC,EAAKtB,OAAO,CAACsB,CAAC,CAACe,MAAM,CAACpB,KAAK,CAAE,CAACc,SAAS,CAAC,UAAU,CAACO,WAAW,CAAC,0BAAqB,CAACC,QAAQ,MAAE,CAAC,EAC3I,CAAC,cAEN1C,KAAA,QAAKkC,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACrBrC,IAAA,UAAOuC,OAAO,CAAC,OAAO,CAACH,SAAS,CAAC,UAAU,CAAAC,QAAA,CAAC,OAAK,CAAO,CAAC,cACzDrC,IAAA,CAACP,SAAS,EACR+C,EAAE,CAAC,OAAO,CACVK,IAAI,CAAC,OAAO,CACZvB,KAAK,CAAEhB,KAAM,CACbmC,QAAQ,CAAGd,CAAC,EAAK,CACfpB,QAAQ,CAACoB,CAAC,CAACe,MAAM,CAACpB,KAAK,CAAC,CACxB,GAAIJ,UAAU,CAAEC,aAAa,CAAC,EAAE,CAAC,CACnC,CAAE,CACFiB,SAAS,aAAAU,MAAA,CAAc5B,UAAU,CAAG,gBAAgB,CAAG,EAAE,CAAG,CAC5DyB,WAAW,CAAC,wBAAwB,CACpCC,QAAQ,MACT,CAAC,CACD1B,UAAU,eAAIlB,IAAA,UAAOoC,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEnB,UAAU,CAAQ,CAAC,EACjE,CAAC,cAENhB,KAAA,QAAKkC,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACrBrC,IAAA,UAAOuC,OAAO,CAAC,UAAU,CAACH,SAAS,CAAC,UAAU,CAAAC,QAAA,CAAC,SAAO,CAAO,CAAC,cAC9DrC,IAAA,CAACN,QAAQ,EAAC8C,EAAE,CAAC,UAAU,CAAClB,KAAK,CAAEd,QAAS,CAACiC,QAAQ,CAAGd,CAAC,EAAKlB,WAAW,CAACkB,CAAC,CAACe,MAAM,CAACpB,KAAK,CAAE,CAACc,SAAS,CAAC,UAAU,CAACW,QAAQ,CAAE,KAAM,CAACC,UAAU,MAACL,WAAW,CAAC,eAAe,CAACC,QAAQ,MAAE,CAAC,EAC5K,CAAC,cAEN1C,KAAA,QAAKkC,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACrBrC,IAAA,UAAOuC,OAAO,CAAC,MAAM,CAACH,SAAS,CAAC,UAAU,CAAAC,QAAA,CAAC,OAAK,CAAO,CAAC,cACxDrC,IAAA,CAACL,QAAQ,EAAC6C,EAAE,CAAC,MAAM,CAAClB,KAAK,CAAEZ,IAAK,CAACuC,OAAO,CAAE7B,WAAY,CAACqB,QAAQ,CAAGd,CAAC,EAAKhB,OAAO,CAACgB,CAAC,CAACL,KAAK,CAAE,CAACc,SAAS,CAAC,UAAU,CAACO,WAAW,CAAC,eAAe,CAAE,CAAC,EAC1I,CAAC,EACH,CAAC,cAENzC,KAAA,QAAKkC,SAAS,CAAC,aAAa,CAAAC,QAAA,EACzBvB,KAAK,eAAId,IAAA,CAACH,OAAO,EAACqD,QAAQ,CAAC,OAAO,CAACC,IAAI,CAAErC,KAAM,CAACsB,SAAS,CAAC,YAAY,CAAE,CAAC,CACzEpB,OAAO,eAAIhB,IAAA,CAACH,OAAO,EAACqD,QAAQ,CAAC,SAAS,CAACC,IAAI,CAAEnC,OAAQ,CAACoB,SAAS,CAAC,YAAY,CAAE,CAAC,EAC7E,CAAC,cAENpC,IAAA,QAAKoC,SAAS,CAAC,YAAY,CAAAC,QAAA,cACzBrC,IAAA,CAACJ,MAAM,EAACiD,IAAI,CAAC,QAAQ,CAACxB,KAAK,CAAC,mBAAmB,CAAC+B,IAAI,CAAC,aAAa,CAAChB,SAAS,CAAC,WAAW,CAACxB,OAAO,CAAEA,OAAQ,CAAE,CAAC,CAC1G,CAAC,EACF,CAAC,CACH,CAAC,EACJ,CAAC,CAEV,CAAC,CAED,cAAe,CAAAT,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
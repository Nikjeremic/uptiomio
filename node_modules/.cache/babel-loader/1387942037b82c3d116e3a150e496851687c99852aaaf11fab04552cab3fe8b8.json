{"ast":null,"code":"var _jsxFileName = \"/home/nikjeremic/Desktop/uptiomio/src/components/SelfTaxCalculator.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { Card } from 'primereact/card';\nimport { InputNumber } from 'primereact/inputnumber';\nimport { Dropdown } from 'primereact/dropdown';\nimport { Checkbox } from 'primereact/checkbox';\nimport { ProgressSpinner } from 'primereact/progressspinner';\nimport { Message } from 'primereact/message';\nimport { invoiceAPI, nbsAPI } from '../services/api';\nimport { useAuth } from './AuthContext';\nimport './SelfTaxCalculator.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst N1 = 107738;\nconst N2 = 64979;\nconst TAX1 = 0.20;\nconst TAX2 = 0.10;\nconst PIO_RATE = 0.24;\nconst PIO_MIN_OPT2 = 33084;\nconst HEALTH_RATE = 0.103;\nconst HEALTH_MIN = 6276;\nfunction calculateQuarter(income, option, hasOtherHealthInsurance) {\n  const safeIncome = Math.max(0, income || 0);\n  if (option === 1) {\n    const taxableIncome = Math.max(0, safeIncome - N1);\n    const tax = taxableIncome * TAX1;\n    const pension = taxableIncome * PIO_RATE;\n    const healthBase = taxableIncome * HEALTH_RATE;\n    const health = hasOtherHealthInsurance ? 0 : Math.max(HEALTH_MIN, healthBase || 0);\n    const total = tax + pension + health;\n    const effectiveRate = safeIncome > 0 ? total / safeIncome * 100 : 0;\n    return {\n      taxableIncome,\n      tax,\n      pension,\n      health,\n      total,\n      effectiveRate\n    };\n  }\n\n  // option 2\n  const normCosts = N2 + safeIncome * 0.34;\n  const taxableIncome = Math.max(0, safeIncome - normCosts);\n  const tax = taxableIncome * TAX2;\n  const pension = Math.max(PIO_MIN_OPT2, taxableIncome * PIO_RATE);\n  const healthBase = taxableIncome * HEALTH_RATE;\n  const health = hasOtherHealthInsurance ? 0 : Math.max(HEALTH_MIN, healthBase || 0);\n  const total = tax + pension + health;\n  const effectiveRate = safeIncome > 0 ? total / safeIncome * 100 : 0;\n  return {\n    taxableIncome,\n    tax,\n    pension,\n    health,\n    total,\n    effectiveRate\n  };\n}\nconst SelfTaxCalculator = () => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const isAdmin = (user === null || user === void 0 ? void 0 : user.role) === 'admin';\n  const [income, setIncome] = useState(null);\n  const [option, setOption] = useState(1);\n  const [hasOtherHealthInsurance, setHasOtherHealthInsurance] = useState(false);\n  const [allInvoices, setAllInvoices] = useState([]);\n  const [loadingInvoices, setLoadingInvoices] = useState(false);\n  const [error, setError] = useState(null);\n  const currentYear = new Date().getFullYear();\n  const [selectedQuarter, setSelectedQuarter] = useState(1);\n  const [selectedYear, setSelectedYear] = useState(currentYear);\n  const [eurRate, setEurRate] = useState(null);\n  const [usdRate, setUsdRate] = useState(null);\n  const [ratesDate, setRatesDate] = useState(null);\n  useEffect(() => {\n    const loadInvoices = async () => {\n      try {\n        setLoadingInvoices(true);\n        setError(null);\n        const {\n          data\n        } = isAdmin ? await invoiceAPI.getAllInvoices() : await invoiceAPI.getMyInvoices();\n        setAllInvoices(data);\n      } catch (e) {\n        var _e$response, _e$response$data;\n        setError((e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.message) || 'Ne mogu da učitam fakture');\n      } finally {\n        setLoadingInvoices(false);\n      }\n    };\n    loadInvoices();\n  }, [isAdmin]);\n\n  // Load NBS middle rates for EUR and USD\n  useEffect(() => {\n    (async () => {\n      try {\n        const {\n          data\n        } = await nbsAPI.getRates();\n        if (data) {\n          var _data$eur, _data$usd, _data$date;\n          setEurRate((_data$eur = data.eur) !== null && _data$eur !== void 0 ? _data$eur : null);\n          setUsdRate((_data$usd = data.usd) !== null && _data$usd !== void 0 ? _data$usd : null);\n          setRatesDate((_data$date = data.date) !== null && _data$date !== void 0 ? _data$date : null);\n        }\n      } catch (e) {\n        // silently ignore, rates are optional helper\n      }\n    })();\n  }, []);\n  const quarterIncome = useMemo(() => {\n    const startMonth = (selectedQuarter - 1) * 3;\n    const start = new Date(selectedYear, startMonth, 1);\n    start.setHours(0, 0, 0, 0);\n    const end = new Date(selectedYear, startMonth + 3, 1);\n    return allInvoices.filter(inv => inv.isPaid && inv.paidAt).filter(inv => {\n      const paid = new Date(inv.paidAt);\n      return paid >= start && paid < end;\n    }).reduce((sum, inv) => {\n      const rawAmount = inv.amount;\n      const numericAmount = typeof rawAmount === 'number' ? rawAmount : Number(rawAmount) || 0;\n      return sum + numericAmount;\n    }, 0);\n  }, [allInvoices, selectedQuarter, selectedYear]);\n  useEffect(() => {\n    setIncome(quarterIncome);\n  }, [quarterIncome]);\n  const incomeValue = income !== null && income !== void 0 ? income : 0;\n  const result = calculateQuarter(incomeValue, option, hasOtherHealthInsurance);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"self-tax-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"self-tax-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Samooporezivanje \\u2013 kalkulator po kvartalu\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Unesi ukupan bruto prihod u kvartalu, izaberi opciju oporezivanja i vidi koliki su porez, PIO i zdravstveno po zvani\\u010Dnom vodi\\u010Du za frilensere (jun 2025).\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this), eurRate && usdRate && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"rates-info\",\n        children: [\"NBS srednji kurs\", ratesDate ? ` (${ratesDate})` : '', \": 1 EUR =\", ' ', eurRate.toFixed(4), \" RSD, 1 USD = \", usdRate.toFixed(4), \" RSD.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      className: \"self-tax-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"self-tax-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"field\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"quarter\",\n            children: \"Kvartal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Dropdown, {\n            id: \"quarter\",\n            value: selectedQuarter,\n            options: [{\n              label: 'I kvartal (jan–mart)',\n              value: 1\n            }, {\n              label: 'II kvartal (apr–jun)',\n              value: 2\n            }, {\n              label: 'III kvartal (jul–sep)',\n              value: 3\n            }, {\n              label: 'IV kvartal (okt–dec)',\n              value: 4\n            }],\n            onChange: e => setSelectedQuarter(e.value),\n            className: \"w-full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"field\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"year\",\n            children: \"Godina\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Dropdown, {\n            id: \"year\",\n            value: selectedYear,\n            options: [{\n              label: String(currentYear - 1),\n              value: currentYear - 1\n            }, {\n              label: String(currentYear),\n              value: currentYear\n            }, {\n              label: String(currentYear + 1),\n              value: currentYear + 1\n            }],\n            onChange: e => setSelectedYear(e.value),\n            className: \"w-full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n            className: \"field-help\",\n            children: \"Prihod se sabira iz faktura sa statusom Paid i datumom pla\\u0107anja u tom kvartalu.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"field\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"income\",\n            children: \"Kvartalni prihod (RSD)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(InputNumber, {\n            id: \"income\",\n            value: income,\n            onValueChange: e => {\n              var _e$value;\n              return setIncome((_e$value = e.value) !== null && _e$value !== void 0 ? _e$value : 0);\n            },\n            mode: \"currency\",\n            currency: \"RSD\",\n            locale: \"sr-RS\",\n            min: 0,\n            className: \"w-full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"field\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"option\",\n            children: \"Model oporezivanja\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Dropdown, {\n            id: \"option\",\n            value: option,\n            options: [{\n              label: 'Opcija 1 – normirani troškovi 107.738 RSD',\n              value: 1\n            }, {\n              label: 'Opcija 2 – normirani 64.979 RSD + 34% prihoda',\n              value: 2\n            }],\n            onChange: e => setOption(e.value),\n            className: \"w-full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"field checkbox-field\",\n          children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n            inputId: \"health\",\n            checked: hasOtherHealthInsurance,\n            onChange: e => setHasOtherHealthInsurance(!!e.checked)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"health\",\n            children: \"Zdravstveno osiguran sam po drugom osnovu\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"self-tax-results\",\n        children: [loadingInvoices && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"results-loading\",\n          children: [/*#__PURE__*/_jsxDEV(ProgressSpinner, {\n            style: {\n              width: '30px',\n              height: '30px'\n            },\n            strokeWidth: \"4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"U\\u010Ditavam fakture\\u2026\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 13\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"results-error\",\n          children: /*#__PURE__*/_jsxDEV(Message, {\n            severity: \"error\",\n            text: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 13\n        }, this), !loadingInvoices && !error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"result-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Prihod iz pla\\u0107enih faktura\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [quarterIncome.toLocaleString('sr-RS', {\n              maximumFractionDigits: 0\n            }), \" RSD\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Rezultat za kvartal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"result-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Oporezivi prihod\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [result.taxableIncome.toLocaleString('sr-RS', {\n              maximumFractionDigits: 0\n            }), \" RSD\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"result-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Porez\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [result.tax.toLocaleString('sr-RS', {\n              maximumFractionDigits: 0\n            }), \" RSD\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"result-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"PIO doprinos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [result.pension.toLocaleString('sr-RS', {\n              maximumFractionDigits: 0\n            }), \" RSD\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"result-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Zdravstveno osiguranje\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [result.health.toLocaleString('sr-RS', {\n              maximumFractionDigits: 0\n            }), \" RSD\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"result-row total\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Ukupno za uplatu\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [result.total.toLocaleString('sr-RS', {\n              maximumFractionDigits: 0\n            }), \" RSD\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"result-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Efektivno optere\\u0107enje\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [incomeValue > 0 ? result.effectiveRate.toFixed(2) : '0.00', \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 143,\n    columnNumber: 5\n  }, this);\n};\n_s(SelfTaxCalculator, \"6Qjg6opkizF+P1Ix8xPJF1lLZ3M=\", false, function () {\n  return [useAuth];\n});\n_c = SelfTaxCalculator;\nexport default SelfTaxCalculator;\nvar _c;\n$RefreshReg$(_c, \"SelfTaxCalculator\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","Card","InputNumber","Dropdown","Checkbox","ProgressSpinner","Message","invoiceAPI","nbsAPI","useAuth","jsxDEV","_jsxDEV","N1","N2","TAX1","TAX2","PIO_RATE","PIO_MIN_OPT2","HEALTH_RATE","HEALTH_MIN","calculateQuarter","income","option","hasOtherHealthInsurance","safeIncome","Math","max","taxableIncome","tax","pension","healthBase","health","total","effectiveRate","normCosts","SelfTaxCalculator","_s","user","isAdmin","role","setIncome","setOption","setHasOtherHealthInsurance","allInvoices","setAllInvoices","loadingInvoices","setLoadingInvoices","error","setError","currentYear","Date","getFullYear","selectedQuarter","setSelectedQuarter","selectedYear","setSelectedYear","eurRate","setEurRate","usdRate","setUsdRate","ratesDate","setRatesDate","loadInvoices","data","getAllInvoices","getMyInvoices","e","_e$response","_e$response$data","response","message","getRates","_data$eur","_data$usd","_data$date","eur","usd","date","quarterIncome","startMonth","start","setHours","end","filter","inv","isPaid","paidAt","paid","reduce","sum","rawAmount","amount","numericAmount","Number","incomeValue","result","className","children","fileName","_jsxFileName","lineNumber","columnNumber","toFixed","htmlFor","id","value","options","label","onChange","String","onValueChange","_e$value","mode","currency","locale","min","inputId","checked","style","width","height","strokeWidth","severity","text","toLocaleString","maximumFractionDigits","_c","$RefreshReg$"],"sources":["/home/nikjeremic/Desktop/uptiomio/src/components/SelfTaxCalculator.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { Card } from 'primereact/card';\nimport { InputNumber } from 'primereact/inputnumber';\nimport { Dropdown } from 'primereact/dropdown';\nimport { Checkbox } from 'primereact/checkbox';\nimport { ProgressSpinner } from 'primereact/progressspinner';\nimport { Message } from 'primereact/message';\nimport { invoiceAPI, nbsAPI } from '../services/api';\nimport { useAuth } from './AuthContext';\nimport { Invoice } from '../types';\nimport './SelfTaxCalculator.css';\n\ninterface CalculationResult {\n  taxableIncome: number;\n  tax: number;\n  pension: number;\n  health: number;\n  total: number;\n  effectiveRate: number;\n}\n\ntype TaxOption = 1 | 2;\n\nconst N1 = 107_738;\nconst N2 = 64_979;\nconst TAX1 = 0.20;\nconst TAX2 = 0.10;\nconst PIO_RATE = 0.24;\nconst PIO_MIN_OPT2 = 33_084;\nconst HEALTH_RATE = 0.103;\nconst HEALTH_MIN = 6_276;\n\nfunction calculateQuarter(\n  income: number,\n  option: TaxOption,\n  hasOtherHealthInsurance: boolean\n): CalculationResult {\n  const safeIncome = Math.max(0, income || 0);\n\n  if (option === 1) {\n    const taxableIncome = Math.max(0, safeIncome - N1);\n    const tax = taxableIncome * TAX1;\n    const pension = taxableIncome * PIO_RATE;\n    const healthBase = taxableIncome * HEALTH_RATE;\n    const health = hasOtherHealthInsurance ? 0 : Math.max(HEALTH_MIN, healthBase || 0);\n    const total = tax + pension + health;\n    const effectiveRate = safeIncome > 0 ? (total / safeIncome) * 100 : 0;\n\n    return { taxableIncome, tax, pension, health, total, effectiveRate };\n  }\n\n  // option 2\n  const normCosts = N2 + safeIncome * 0.34;\n  const taxableIncome = Math.max(0, safeIncome - normCosts);\n  const tax = taxableIncome * TAX2;\n  const pension = Math.max(PIO_MIN_OPT2, taxableIncome * PIO_RATE);\n  const healthBase = taxableIncome * HEALTH_RATE;\n  const health = hasOtherHealthInsurance ? 0 : Math.max(HEALTH_MIN, healthBase || 0);\n  const total = tax + pension + health;\n  const effectiveRate = safeIncome > 0 ? (total / safeIncome) * 100 : 0;\n\n  return { taxableIncome, tax, pension, health, total, effectiveRate };\n}\n\nconst SelfTaxCalculator: React.FC = () => {\n  const { user } = useAuth();\n  const isAdmin = user?.role === 'admin';\n  const [income, setIncome] = useState<number | null>(null);\n  const [option, setOption] = useState<TaxOption>(1);\n  const [hasOtherHealthInsurance, setHasOtherHealthInsurance] = useState(false);\n  const [allInvoices, setAllInvoices] = useState<Invoice[]>([]);\n  const [loadingInvoices, setLoadingInvoices] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const currentYear = new Date().getFullYear();\n  const [selectedQuarter, setSelectedQuarter] = useState<1 | 2 | 3 | 4>(1);\n  const [selectedYear, setSelectedYear] = useState<number>(currentYear);\n  const [eurRate, setEurRate] = useState<number | null>(null);\n  const [usdRate, setUsdRate] = useState<number | null>(null);\n  const [ratesDate, setRatesDate] = useState<string | null>(null);\n\n  useEffect(() => {\n    const loadInvoices = async () => {\n      try {\n        setLoadingInvoices(true);\n        setError(null);\n        const { data } = isAdmin\n          ? await invoiceAPI.getAllInvoices()\n          : await invoiceAPI.getMyInvoices();\n        setAllInvoices(data);\n      } catch (e: any) {\n        setError(e?.response?.data?.message || 'Ne mogu da učitam fakture');\n      } finally {\n        setLoadingInvoices(false);\n      }\n    };\n    loadInvoices();\n  }, [isAdmin]);\n\n  // Load NBS middle rates for EUR and USD\n  useEffect(() => {\n    (async () => {\n      try {\n        const { data } = await nbsAPI.getRates();\n        if (data) {\n          setEurRate(data.eur ?? null);\n          setUsdRate(data.usd ?? null);\n          setRatesDate(data.date ?? null);\n        }\n      } catch (e) {\n        // silently ignore, rates are optional helper\n      }\n    })();\n  }, []);\n\n  const quarterIncome = useMemo(() => {\n    const startMonth = (selectedQuarter - 1) * 3;\n    const start = new Date(selectedYear, startMonth, 1);\n    start.setHours(0, 0, 0, 0);\n    const end = new Date(selectedYear, startMonth + 3, 1);\n\n    return allInvoices\n      .filter((inv) => inv.isPaid && inv.paidAt)\n      .filter((inv) => {\n        const paid = new Date(inv.paidAt as string);\n        return paid >= start && paid < end;\n      })\n      .reduce((sum, inv) => {\n        const rawAmount: any = (inv as any).amount;\n        const numericAmount =\n          typeof rawAmount === 'number' ? rawAmount : Number(rawAmount) || 0;\n        return sum + numericAmount;\n      }, 0);\n  }, [allInvoices, selectedQuarter, selectedYear]);\n\n  useEffect(() => {\n    setIncome(quarterIncome);\n  }, [quarterIncome]);\n\n  const incomeValue = income ?? 0;\n  const result = calculateQuarter(incomeValue, option, hasOtherHealthInsurance);\n\n  return (\n    <div className=\"self-tax-container\">\n      <div className=\"self-tax-header\">\n        <h1>Samooporezivanje – kalkulator po kvartalu</h1>\n        <p>\n          Unesi ukupan bruto prihod u kvartalu, izaberi opciju oporezivanja i vidi koliki su porez,\n          PIO i zdravstveno po zvaničnom vodiču za frilensere (jun 2025).\n        </p>\n        {eurRate && usdRate && (\n          <p className=\"rates-info\">\n            NBS srednji kurs{ratesDate ? ` (${ratesDate})` : ''}: 1 EUR ={' '}\n            {eurRate.toFixed(4)} RSD, 1 USD = {usdRate.toFixed(4)} RSD.\n          </p>\n        )}\n      </div>\n\n      <Card className=\"self-tax-card\">\n        <div className=\"self-tax-form\">\n          <div className=\"field\">\n            <label htmlFor=\"quarter\">Kvartal</label>\n            <Dropdown\n              id=\"quarter\"\n              value={selectedQuarter}\n              options={[\n                { label: 'I kvartal (jan–mart)', value: 1 },\n                { label: 'II kvartal (apr–jun)', value: 2 },\n                { label: 'III kvartal (jul–sep)', value: 3 },\n                { label: 'IV kvartal (okt–dec)', value: 4 }\n              ]}\n              onChange={(e) => setSelectedQuarter(e.value as 1 | 2 | 3 | 4)}\n              className=\"w-full\"\n            />\n          </div>\n\n          <div className=\"field\">\n            <label htmlFor=\"year\">Godina</label>\n            <Dropdown\n              id=\"year\"\n              value={selectedYear}\n              options={[\n                { label: String(currentYear - 1), value: currentYear - 1 },\n                { label: String(currentYear), value: currentYear },\n                { label: String(currentYear + 1), value: currentYear + 1 }\n              ]}\n              onChange={(e) => setSelectedYear(e.value as number)}\n              className=\"w-full\"\n            />\n            <small className=\"field-help\">\n              Prihod se sabira iz faktura sa statusom Paid i datumom plaćanja u tom kvartalu.\n            </small>\n          </div>\n          <div className=\"field\">\n            <label htmlFor=\"income\">Kvartalni prihod (RSD)</label>\n            <InputNumber\n              id=\"income\"\n              value={income}\n              onValueChange={(e) => setIncome(e.value ?? 0)}\n              mode=\"currency\"\n              currency=\"RSD\"\n              locale=\"sr-RS\"\n              min={0}\n              className=\"w-full\"\n            />\n          </div>\n\n          <div className=\"field\">\n            <label htmlFor=\"option\">Model oporezivanja</label>\n            <Dropdown\n              id=\"option\"\n              value={option}\n              options={[\n                { label: 'Opcija 1 – normirani troškovi 107.738 RSD', value: 1 },\n                { label: 'Opcija 2 – normirani 64.979 RSD + 34% prihoda', value: 2 }\n              ]}\n              onChange={(e) => setOption(e.value as TaxOption)}\n              className=\"w-full\"\n            />\n          </div>\n\n          <div className=\"field checkbox-field\">\n            <Checkbox\n              inputId=\"health\"\n              checked={hasOtherHealthInsurance}\n              onChange={(e) => setHasOtherHealthInsurance(!!e.checked)}\n            />\n            <label htmlFor=\"health\">Zdravstveno osiguran sam po drugom osnovu</label>\n          </div>\n        </div>\n\n        <div className=\"self-tax-results\">\n          {loadingInvoices && (\n            <div className=\"results-loading\">\n              <ProgressSpinner style={{ width: '30px', height: '30px' }} strokeWidth=\"4\" />\n              <span>Učitavam fakture…</span>\n            </div>\n          )}\n          {error && (\n            <div className=\"results-error\">\n              <Message severity=\"error\" text={error} />\n            </div>\n          )}\n          {!loadingInvoices && !error && (\n            <div className=\"result-row\">\n              <span>Prihod iz plaćenih faktura</span>\n              <span>{quarterIncome.toLocaleString('sr-RS', { maximumFractionDigits: 0 })} RSD</span>\n            </div>\n          )}\n          <h2>Rezultat za kvartal</h2>\n          <div className=\"result-row\">\n            <span>Oporezivi prihod</span>\n            <span>{result.taxableIncome.toLocaleString('sr-RS', { maximumFractionDigits: 0 })} RSD</span>\n          </div>\n          <div className=\"result-row\">\n            <span>Porez</span>\n            <span>{result.tax.toLocaleString('sr-RS', { maximumFractionDigits: 0 })} RSD</span>\n          </div>\n          <div className=\"result-row\">\n            <span>PIO doprinos</span>\n            <span>{result.pension.toLocaleString('sr-RS', { maximumFractionDigits: 0 })} RSD</span>\n          </div>\n          <div className=\"result-row\">\n            <span>Zdravstveno osiguranje</span>\n            <span>{result.health.toLocaleString('sr-RS', { maximumFractionDigits: 0 })} RSD</span>\n          </div>\n          <div className=\"result-row total\">\n            <span>Ukupno za uplatu</span>\n            <span>{result.total.toLocaleString('sr-RS', { maximumFractionDigits: 0 })} RSD</span>\n          </div>\n          <div className=\"result-row\">\n            <span>Efektivno opterećenje</span>\n            <span>\n              {incomeValue > 0 ? result.effectiveRate.toFixed(2) : '0.00'}%\n            </span>\n          </div>\n        </div>\n      </Card>\n    </div>\n  );\n};\n\nexport default SelfTaxCalculator;\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}